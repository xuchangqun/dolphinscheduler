## Apache DolphinScheduler dev-1.3.0源码尝鲜01
由于DS在1.3.0版本有比较大的改动，其中包括底层通信架构调整，worker重构等重头戏，相信很多小伙伴对新版本已经跃跃欲试了。
(*本篇文章基于apache dolphinscheduler dev-1.3.0，代码更新2020-05-22 05:00*)

### MasterServer部分
```java
//此部分为master中各个工作流程的初始化启动过程.

//01.
//init remoting server
NettyServerConfig serverConfig = new NettyServerConfig();
serverConfig.setListenPort(masterConfig.getListenPort());
this.nettyRemotingServer = new NettyRemotingServer(serverConfig);
//构建了三个消息处理器 TaskResponseProcessor TaskAckProcessor TaskKillResponseProcessor
this.nettyRemotingServer.registerProcessor(CommandType.TASK_EXECUTE_RESPONSE, new TaskResponseProcessor());
this.nettyRemotingServer.registerProcessor(CommandType.TASK_EXECUTE_ACK, new TaskAckProcessor());
this.nettyRemotingServer.registerProcessor(CommandType.TASK_KILL_RESPONSE, new TaskKillResponseProcessor());
this.nettyRemotingServer.start();

//02
// register
this.masterRegistry.registry();

//03
// self tolerant
this.zkMasterClient.start();

//04
masterSchedulerService.start();

//05
// start QuartzExecutors
// what system should do if exception
try {
    logger.info("start Quartz server...");
    QuartzExecutors.getInstance().start();
} catch (Exception e) {
    try {
        QuartzExecutors.getInstance().shutdown();
    } catch (SchedulerException e1) {
        logger.error("QuartzExecutors shutdown failed : " + e1.getMessage(), e1);
    }
    logger.error("start Quartz failed", e);
}

//06 hook
```

#### 每个部分各自的功能
```java
//01 NettyRemotingServer对象主要是构建netty服务端，并进行配置，编解码规则等。
```

```java
//02 
//在zk注册临时节点，并监听状态
//启动心跳线程，检查master节点的内存/cpu等资源指标，保存在zk上，以备后续使用.
```

```java

```



